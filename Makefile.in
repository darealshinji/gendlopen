
clean_makefiles = \
	src/Makefile \
	examples/Makefile \
	test/Makefile \
	Makefile


all: gendlopen

clean-examples:
	cd examples && $(MAKE) clean

clean-test:
	cd test && $(MAKE) clean

clean-src:
	cd src && $(MAKE) clean

clean: clean-examples clean-test clean-src
	$(_v)-rm -f settings.mk test.c test.h test.cpp test.o test.obj

distclean: clean
	$(_v)-rm -f $(clean_makefiles) test.log
	$(_v)-cd nmake && rm -f *.exe *.obj *.lib *.dll *.exp *.c *.h *.cpp *.hpp

gendlopen:
	cd src && $(MAKE)

check: $(GENDLOPEN)
	cd test && $(MAKE)
	cd examples && $(MAKE)

run_examples: examples
	cd examples && $(MAKE) run_examples

run_examples_wine: examples
	cd examples && $(MAKE) run_examples_wine

run_tests: test
	cd test && $(MAKE) run_tests

run_tests_wine: test
	cd test && $(MAKE) run_tests_wine

