OBJS = main.o clang-ast.o generate.o parse.o tokenize.o utils.o


.PHONY: all clean

all: gendlopen$(EXEEXT)

clean:
	$(_v)-rm -f gendlopen gen_template_h template.h *.exe *.o


gen_template_h: gen_template_h.c
	$(cc_v)$(CCBUILD) gen_template_h.c -o $@

template.h: $(GEN_TEMPL)
	$(gen_v)./$(GEN_TEMPL) templates


gendlopen$(EXEEXT): $(OBJS)
	$(cxxld_v)$(CXX) -o $@ $(OBJS) $(LDFLAGS)

main.o: main.cpp
	$(cxx_v)$(CXX) $(CXXFLAGS) -c main.cpp -o $@

clang-ast.o: clang-ast.cpp
	$(cxx_v)$(CXX) $(CXXFLAGS) -c clang-ast.cpp -o $@

generate.o: generate.cpp
	$(cxx_v)$(CXX) $(CXXFLAGS) -c generate.cpp -o $@

parse.o: parse.cpp
	$(cxx_v)$(CXX) $(CXXFLAGS) -c parse.cpp -o $@

tokenize.o: tokenize.cpp
	$(cxx_v)$(CXX) $(CXXFLAGS) -c tokenize.cpp -o $@

utils.o: utils.cpp
	$(cxx_v)$(CXX) $(CXXFLAGS) -c utils.cpp -o $@


gendlopen.hpp: cio.hpp
main.cpp: gendlopen.hpp args.hxx
generate.cpp: gendlopen.hpp template.h
clang-ast.cpp parse.cpp tokenize.cpp utils.cpp: gendlopen.hpp
